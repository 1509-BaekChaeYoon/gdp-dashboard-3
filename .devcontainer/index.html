import streamlit as st
import math

# í˜ì´ì§€ ì„¤ì •
st.set_page_config(layout="wide")

# --- 1. ìƒë‹¨ ì œëª©
st.title("ë®¤ì§€ì»¬ ë°°ìš° ì•Œì•„ë³´ê¸° ğŸ­")

# --- 2. ì‘ì€ ë¶€ì œëª©
st.markdown("### ë®¤ì§€ì»¬ ë°°ìš°ì˜ ì´ë¦„ì„ ì…ë ¥í•˜ì—¬ ì‘í’ˆ í™œë™ì„ ì•Œì•„ë³´ì„¸ìš”!")

# --- 3. ê²€ìƒ‰ì°½
search_query = st.text_input("ë°°ìš° ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”.", "")

# --- 4. ë°°ìš° ë°ì´í„° (ì´ë¯¸ì§€ ê²½ë¡œë¥¼ ì›¹ URLë¡œ ìˆ˜ì •)
ë°°ìš°_ë°ì´í„° = {
    "ê¹€ì„±ì² ": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸1.jpg",
        "ì‘í’ˆ": ["ë°ìŠ¤ë…¸íŠ¸", "ë§ˆì´ ë²„í‚· ë¦¬ìŠ¤íŠ¸", "ëª¬í…Œí¬ë¦¬ìŠ¤í† ", "ë¯¸ìŠ¤í„°ë§ˆìš°ìŠ¤", "ë±€íŒŒì´ì–´ ì•„ë”", "ë² ë¥´í…Œë¥´", "ë¹… í”¼ì‰¬", "ì‚¬ì¶˜ê¸°", "ìŠ¤ìœ„ë‹ˆí† ë“œ", "ì‹œì•¼ í”Œë«í¼:ë°°ìš°ë“¤", "ì•ˆë…•! ìœ ì—í”„ì˜¤", "ì§€í‚¬ ì•¤ í•˜ì´ë“œ", "í’ì›”ì£¼", "íŒ¬ë ˆí„°", "ì†íƒí˜¸í…”"],
        "ì„¤ëª…": "1991/12/31"
    },
    "ê¹€ì¤€ìˆ˜": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸2.jpg",
        "ì‘í’ˆ": ["ë“œë¼í˜ë¼", "ë°ìŠ¤ë…¸íŠ¸", "ë„ë¦¬ì•ˆ ê·¸ë ˆì´", "ëª¨ì°¨ë¥´íŠ¸", "ì•Œë¼ë”˜", "ì—‘ìŠ¤ì¹¼ë¦¬ë²„", "ì—˜ë¦¬ìë²³", "ì›¨ìŠ¤íŠ¸ ì‚¬ì´ë“œ ìŠ¤í† ë¦¬", "ì²œêµ­ì˜ ëˆˆë¬¼", "ë””ì…ˆë²„, ëë‚˜ì§€ ì•Šì€ ë…¸ë˜"],
        "ì„¤ëª…": "1986/12/15"
    },
    "ë¯¼ê²½ì•„": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸3.jpg",
        "ì‘í’ˆ": ["ë ˆë“œë¶", "ë ˆë² ì¹´", "ë ŒíŠ¸", "ë¼ìŠ¤íŠ¸ íŒŒì´ë¸Œ ì´ì–´ìŠ¤", "ëª¬í…Œí¬ë¦¬ìŠ¤í† ", "ë² ì–´ ë” ë®¤ì§€ì»¬", "ì•„ì´ë‹¤", "ì•Œë¼ë”˜", "ì›ƒëŠ” ë‚¨ì", "ì—‘ìŠ¤ì¹¼ë¦¬ë²„", "ì§€í‚¬ ì•¤ í•˜ì´ë“œ", "ë” ë¼ìŠ¤íŠ¸ í‚¤ìŠ¤", "ì‹œì¹´ê³ "],
        "ì„¤ëª…": "1992/11/10"
    },
    "ë°•ê°•í˜„": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸4.jpg",
        "ì‘í’ˆ": ["ë””ì–´ ì—ë°˜ í•¸ìŠ¨", "ë¼ì´ì–´ íƒ€ì„", "ë§ˆë¦¬ ì•™íˆ¬ì•„ë„¤íŠ¸", "ë©¤í”¼ìŠ¤", "ëª¨ì°¨ë¥´íŠ¸!", "ë² ì–´ ë” ë®¤ì§€ì»¬", "ì›¨ìŠ¤íŠ¸ ì‚¬ì´ë“œ ìŠ¤í† ë¦¬", "ì›ƒëŠ” ë‚¨ì", "ì´ë¸”ë°ë“œ", "ì¸ ë” í•˜ì´ì¸ ", "ê·¸ë ˆì´íŠ¸ ì½”ë©§", "ê´‘í™”ë¬¸ ì—°ê°€", "í‚¹í‚¤ë¶€ì¸ ", "í•˜ë°ìŠ¤íƒ€ìš´", "ì—‘ìŠ¤ì¹¼ë¦¬ë²„", "ì—˜ë¦¬ìë²³", "ì•Œë¼ë”˜", "ì¹ ì„œ"],
        "ì„¤ëª…": "1989/12/27"
    },
    "ë°•ì€íƒœ": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸5.jpg",
        "ì‘í’ˆ": ["ë‹¥í„° ì§€ë°”ê³ ", "ë„ë¦¬ì•ˆ ê·¸ë ˆì´", "ë¼ì´ì˜¨ í‚¹", "ëª¨ì°¨ë¥´íŠ¸!", "ë²¤í—ˆ", "ë² í† ë²¤", "ì‚¬ë‘ì€ ë¹„ë¥¼ íƒ€ê³ ", "ìŠ¤ìœ„ë‹ˆ í† ë“œ", "ì›ƒëŠ” ë‚¨ì", "ì¼ í…Œë…¸ë ˆ", "ì—˜ë¦¬ìë²³", "ì  í‹€ë§¨ìŠ¤ ê°€ì´ë“œ:ì‚¬ë‘ê³¼ ì‚´ì¸í¸", "ì§€ì €ìŠ¤ í¬ë¼ì´ìŠ¤íŠ¸ ìˆ˜í¼ìŠ¤íƒ€", "ì§€í‚¬ ì•¤ í•˜ì´ë“œ", "í‚¹í‚¤ë¶€ì¸ ", "í”¼ë§›ê³¨ ì—°ê°€", "íŒ¬í…€", "í”„ë‘ì¼„ìŠˆíƒ€ì¸", "í–„ë¦¿", "í™©íƒœì ë£¨ëŒí”„", "ë§¤ë””ìŠ¨ ì¹´ìš´í‹°ì˜ ë‹¤ë¦¬", "ë…¸íŠ¸ë¥´ë‹´ ë“œ íŒŒë¦¬"],
        "ì„¤ëª…": "1981/06/14"
    },
    "ë°•ì§€ì—°": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸6.jpg",
        "ì‘í’ˆ": ["ê³ ìŠ¤íŠ¸", "ê³ ìŠ¤íŠ¸ ë² ì´ì»¤ë¦¬", "ê¸ˆê°•,1894", "ë“œë¼í˜ë¼", "ë¼ìŠ¤íŠ¸ íŒŒì´ë¸Œ ì´ì–´ìŠ¤", "ë ˆ ë¯¸ìë ˆë¸”", "ë ˆë² ì¹´", "ë§˜ë§ˆë¯¸ì•„", "ë¯¸ë‚¨ì´ì‹œë„¤ìš”", "ë¹¨ë˜", "ì‹œë¼ë…¸", "ì•„ë¦¬ë‘", "ì–´ì©Œë©´ í•´í”¼ì—”ë”©", "ì›ìŠ¤", "ì¼ í…Œë…¸ë ˆ"],
        "ì„¤ëª…": "1988/05/14"
    },
    "ì†¡ì€í˜œ": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸7.jpg",
        "ì‘í’ˆ": ["ì—˜ë¦¬ìë²³", "ì˜¤í˜ë¼ì˜ ìœ ë ¹", "íŒ¬í…€"],
        "ì„¤ëª…": "1992/12/17"
    },
    "ì´ì§€í˜œ": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸8.jpg",
        "ì‘í’ˆ": ["ê¸°ìƒì¶©", "ê·€í™˜", "ë“œë¼í˜ë¼", "ë ˆë² ì¹´", "ëª¬í…Œí¬ë¦¬ìŠ¤í† ", "ë§ˆë¦¬ ì•™íˆ¬ì•„ë„¤íŠ¸", "ë¯¸ë…€ì™€ ì•¼ìˆ˜", "ë² ë¥´í…Œë¥´", "ìŠ¤ìœ„ë‹ˆ í† ë“œ", "ìˆœìˆ˜ì˜ ì‹œëŒ€", "ì•ˆë‚˜ ì¹´ë ˆë‹ˆë‚˜", "ì—˜ë¦¬ìë²³", "ì˜¤í•„ë¦¬ì–´", "ì§€í‚¬ ì•¤ í•˜ì´ë“œ", "íŒŒì¹œì½” ì‹œì¦Œ 1,2", "íŒ¬í…€", "í”„ë‘ì¼„ìŠˆíƒ€ì¸"],
        "ì„¤ëª…": "1990/02/09"
    },
    "ì „ë™ì„": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸9.jpg",
        "ì‘í’ˆ": ["ë“œë¼í˜ë¼", "ë‘ ë„ì‹œ ì´ì•¼ê¸°", "ë” ë¼ìŠ¤íŠ¸ í‚¤ìŠ¤", "ë¡œë¯¸ì˜¤ ì•¤ ì¤„ë¦¬ì—£", "ë§ˆë¦¬ ì•™íˆ¬ì•„ë„¤íŠ¸", "ëª¨ì°¨ë¥´íŠ¸!", "ëª¬í…Œí¬ë¦¬ìŠ¤í† ", "ì Šì€ ë² ë¥´í…Œë¥´ì˜ ìŠ¬í””", "ì§€í‚¬ ì•¤ í•˜ì´ë“œ", "ì²œêµ­ì˜ ëˆˆë¬¼", "í”„ë‘ì¼„ìŠˆíƒ€ì¸", "íŒ¬í…€", "í•´ë¥¼ í’ˆì€ ë‹¬", "í—¤ë“œìœ…", "í–„ë¦¿", "ë…¸íŠ¸ë¥´ë‹´ ë“œ íŒŒë¦¬"],
        "ì„¤ëª…": "1988/02/06"
    },
    "ì •ì„ ì•„": {
        "ì‚¬ì§„": "/workspaces/gdp-dashboard-3/á„‹á…°á†¸10.jpg",
        "ì‘í’ˆ": ["ë‚˜ì¸", "ë‚˜í´ë ˆì˜¹", "ë…¸íŠ¸ë¥´ë‹´ ë“œ íŒŒë¦¬", "ë“œë¼í˜ë¼", "ë“œë¦¼ê±¸ì¦ˆ", "ë°ìŠ¤ë…¸íŠ¸", "ë§˜ë§ˆë¯¸ì•„", "ë©¤í”¼ìŠ¤", "ëª¨ì°¨ë¥´íŠ¸!", "ë³´ë””ê°€ë“œ", "ì‚¬ìš´ë“œ ì˜¤ë¸Œ ë®¤ì§", "ìŒí™”ë³„ê³¡", "ì‹œì¹´ê³ ", "ì•„ì´ë‹¤", "ì•„ì´ ëŸ¬ë¸Œ ìœ ", "ì•ˆë‚˜ ì¹´ë ˆë‹ˆë‚˜", "ì—ë¹„íƒ€", "ìœ ë¦°íƒ€ìš´", "ì›ƒëŠ” ë‚¨ì", "ìœ„í‚¤ë“œ", "ì´í”„/ë´", "ì œë„ˆë‘", "ì§€ì €ìŠ¤ í¬ë¼ì´ìŠ¤íŠ¸ ìˆ˜í¼ìŠ¤íƒ€", "ì§€í‚¬ ì•¤ í•˜ì´ë“œ", "í‚¹í‚¤ë¶€ì¸ ", "í…”ë¯¸ ì˜¨ ì–´ ì„ ë°ì´", "í•´ì–´í™”", "ê°¬ë¸”ëŸ¬", "ê²¨ìš¸ì—°ê°€", "ê´‘í™”ë¬¸ ì—°ê°€", "ë ŒíŠ¸"],
        "ì„¤ëª…": "1984/10/12"
    }
}


ë°°ìš°_ì´ë¦„_ëª©ë¡ = sorted(list(ë°°ìš°_ë°ì´í„°.keys()))

# ê²€ìƒ‰ ê²°ê³¼ í•„í„°ë§
if search_query:
    filtered_ë°°ìš°_ì´ë¦„ = [name for name in ë°°ìš°_ì´ë¦„_ëª©ë¡ if search_query.lower() in name.lower()]
else:
    filtered_ë°°ìš°_ì´ë¦„ = ë°°ìš°_ì´ë¦„_ëª©ë¡

# ì„¸ì…˜ ìƒíƒœ ì´ˆê¸°í™”
if "selected_actor" not in st.session_state:
    st.session_state.selected_actor = None

# ìƒì„¸ í˜ì´ì§€ ë˜ëŠ” ëª©ë¡ í˜ì´ì§€ í‘œì‹œ
if st.session_state.selected_actor:
    st.markdown("---")
    if st.button("â† ëŒì•„ê°€ê¸°"):
        st.session_state.selected_actor = None
        st.rerun()

    actor_name = st.session_state.selected_actor
    actor_info = ë°°ìš°_ë°ì´í„°[actor_name]

    st.markdown(f"## {actor_name}")
    st.image(actor_info["ì‚¬ì§„"], width=300)
    st.markdown(f"**ìƒë…„ì›”ì¼:** {actor_info.get('ì„¤ëª…', 'ì •ë³´ ì—†ìŒ')}")
    st.markdown("### ì£¼ìš” ì‘í’ˆ")
    # ì‘í’ˆ ëª©ë¡ì„ 2ê°œì˜ ì»¬ëŸ¼ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë³´ê¸° ì¢‹ê²Œ í‘œì‹œ
    col1, col2 = st.columns(2)
    mid_point = math.ceil(len(actor_info["ì‘í’ˆ"]) / 2)
    with col1:
        for ì‘í’ˆ in actor_info["ì‘í’ˆ"][:mid_point]:
            st.markdown(f"- {ì‘í’ˆ}")
    with col2:
        for ì‘í’ˆ in actor_info["ì‘í’ˆ"][mid_point:]:
            st.markdown(f"- {ì‘í’ˆ}")

else:
    # í˜ì´ì§€ë„¤ì´ì…˜
    actors_per_page = 9
    total_actors = len(filtered_ë°°ìš°_ì´ë¦„)
    total_pages = math.ceil(total_actors / actors_per_page) if total_actors > 0 else 1

    if "page" not in st.session_state:
        st.session_state.page = 1
    
    # í˜„ì¬ í˜ì´ì§€ê°€ ì „ì²´ í˜ì´ì§€ ìˆ˜ë¥¼ ë„˜ì§€ ì•Šë„ë¡ ì¡°ì •
    if st.session_state.page > total_pages:
        st.session_state.page = total_pages

    # í˜ì´ì§€ ì„ íƒ (UI)
    st.selectbox(
        "í˜ì´ì§€ ì„ íƒ", 
        options=range(1, total_pages + 1), 
        key="page",
        format_func=lambda i: f"{i} í˜ì´ì§€"
    )

    start_idx = (st.session_state.page - 1) * actors_per_page
    end_idx = start_idx + actors_per_page
    page_actors = filtered_ë°°ìš°_ì´ë¦„[start_idx:end_idx]

    # ì¸ë„¤ì¼ í‘œì‹œ (st.imageì™€ st.button ì‚¬ìš©)
    columns = st.columns(3)
    for i, actor in enumerate(page_actors):
        with columns[i % 3]:
            st.image(ë°°ìš°_ë°ì´í„°[actor]["ì‚¬ì§„"])
            st.markdown(f"<h5 style='text-align: center;'>{actor}</h5>", unsafe_allow_html=True)
            if st.button("ìì„¸íˆ ë³´ê¸°", key=f"btn_{actor}", use_container_width=True):
                st.session_state.selected_actor = actor
                st.rerun()

    # ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ì„ ë•Œ
    if not filtered_ë°°ìš°_ì´ë¦„:
        st.warning("ì¼ì¹˜í•˜ëŠ” ë®¤ì§€ì»¬ ë°°ìš°ê°€ ì—†ìŠµë‹ˆë‹¤.")
